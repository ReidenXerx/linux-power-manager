# ==============================================================================
# HYBRID GPU PRESET - Intel iGPU + NVIDIA dGPU
# ==============================================================================
# Description: Enable both Intel integrated and NVIDIA discrete graphics
# Use case: Balanced performance, automatic GPU switching based on workload
# Power consumption: Medium (automatic switching saves power when possible)
# Performance: High (NVIDIA available for demanding tasks)
# ==============================================================================

HYBRID_GPU_MODE="hybrid"
HYBRID_DESCRIPTION="Intel iGPU + NVIDIA dGPU (automatic switching)"

# Primary GPU switching method (try in order)
HYBRID_PRIMARY_METHOD="envycontrol"
HYBRID_FALLBACK_METHOD="supergfxctl"

# EnvyControl commands
HYBRID_ENVYCONTROL_SWITCH="envycontrol --switch hybrid"
HYBRID_ENVYCONTROL_VERIFY="envycontrol --query"

# SuperGfxCtl commands  
HYBRID_SUPERGFXCTL_SWITCH="supergfxctl -m hybrid"
HYBRID_SUPERGFXCTL_VERIFY="supergfxctl -g"

# Manual fallback commands
HYBRID_MANUAL_COMMANDS=(
    "echo 'auto' > /sys/bus/pci/devices/0000:01:00.0/power/control"
    "modprobe nvidia_drm"
    "modprobe nvidia_modeset"
)

# Verification commands
HYBRID_VERIFY_COMMANDS=(
    "lspci | grep -i nvidia"
    "nvidia-smi --query-gpu=name --format=csv,noheader,nounits"
    "glxinfo | grep 'OpenGL renderer'"
)

# Post-switch optimizations
HYBRID_POST_SWITCH_COMMANDS=(
    "nvidia-settings -a '[gpu:0]/GPUPowerMizerMode=1'"
    "echo 'auto' > /sys/class/drm/card1/device/power/control"
)

# Reboot requirement
HYBRID_REQUIRES_REBOOT=false
HYBRID_LOGOUT_REQUIRED=true
