# ==============================================================================
# DISCRETE GPU PRESET - NVIDIA dGPU Only
# ==============================================================================
# Description: Use only NVIDIA discrete graphics, disable Intel iGPU
# Use case: Maximum performance, gaming, GPU-intensive workloads
# Power consumption: High (NVIDIA GPU always active)
# Performance: Maximum (full NVIDIA performance)
# ==============================================================================

DISCRETE_GPU_MODE="discrete"
DISCRETE_DESCRIPTION="NVIDIA dGPU only (Intel disabled)"

# Primary GPU switching method (try in order)
DISCRETE_PRIMARY_METHOD="envycontrol"
DISCRETE_FALLBACK_METHOD="supergfxctl"

# EnvyControl commands
DISCRETE_ENVYCONTROL_SWITCH="envycontrol --switch nvidia"
DISCRETE_ENVYCONTROL_VERIFY="envycontrol --query"

# SuperGfxCtl commands
DISCRETE_SUPERGFXCTL_SWITCH="supergfxctl -m discrete"
DISCRETE_SUPERGFXCTL_VERIFY="supergfxctl -g"

# Manual fallback commands
DISCRETE_MANUAL_COMMANDS=(
    "echo 'ON' > /proc/acpi/bbswitch"
    "modprobe nvidia_drm modeset=1"
    "modprobe nvidia_modeset"
    "modprobe nvidia"
)

# Verification commands
DISCRETE_VERIFY_COMMANDS=(
    "nvidia-smi --query-gpu=name --format=csv,noheader,nounits"
    "glxinfo | grep 'OpenGL renderer' | grep -i nvidia"
    "cat /proc/acpi/bbswitch 2>/dev/null || echo 'bbswitch not available'"
)

# Post-switch optimizations
DISCRETE_POST_SWITCH_COMMANDS=(
    "nvidia-settings -a '[gpu:0]/GPUPowerMizerMode=0'"
    "nvidia-settings -a '[gpu:0]/GPUMemoryTransferRateOffset[3]=1000'"
    "nvidia-settings -a '[gpu:0]/GPUGraphicsClockOffset[3]=100'"
)

# Reboot requirement
DISCRETE_REQUIRES_REBOOT=true
DISCRETE_LOGOUT_REQUIRED=false
