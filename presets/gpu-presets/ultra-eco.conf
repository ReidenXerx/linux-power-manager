# ==============================================================================
# ULTRA ECO GPU PRESET - Intel iGPU Ultra Low Power
# ==============================================================================
# Description: Intel iGPU with maximum power savings, NVIDIA completely off
# Use case: Maximum battery life, basic tasks, text editing
# Power consumption: Minimum (NVIDIA off, Intel underclocked)
# Performance: Minimum (basic display only)
# ==============================================================================

ULTRA_ECO_GPU_MODE="integrated"
ULTRA_ECO_DESCRIPTION="Intel iGPU ultra eco mode (NVIDIA disabled)"

# Primary GPU switching method (try in order)
ULTRA_ECO_PRIMARY_METHOD="envycontrol"
ULTRA_ECO_FALLBACK_METHOD="supergfxctl"

# EnvyControl commands
ULTRA_ECO_ENVYCONTROL_SWITCH="envycontrol --switch integrated"
ULTRA_ECO_ENVYCONTROL_VERIFY="envycontrol --query"

# SuperGfxCtl commands
ULTRA_ECO_SUPERGFXCTL_SWITCH="supergfxctl -m integrated"
ULTRA_ECO_SUPERGFXCTL_VERIFY="supergfxctl -g"

# Manual fallback commands
ULTRA_ECO_MANUAL_COMMANDS=(
    "echo '1' > /sys/bus/pci/devices/0000:01:00.0/remove"
    "modprobe -r nvidia_drm nvidia_modeset nvidia"
    "echo 'blacklist nvidia' > /etc/modprobe.d/blacklist-nvidia.conf"
)

# Verification commands
ULTRA_ECO_VERIFY_COMMANDS=(
    "lspci | grep -i vga | grep -i intel"
    "glxinfo | grep 'OpenGL renderer' | grep -i intel"
    "cat /sys/class/drm/card0/device/power/runtime_status"
)

# Post-switch optimizations (Ultra eco Intel settings)
ULTRA_ECO_POST_SWITCH_COMMANDS=(
    "echo 'powersave' > /sys/class/drm/card0/device/power_dpm_force_performance_level"
    "echo 'auto' > /sys/class/drm/card0/device/power/control"
    "echo '1' > /sys/class/drm/card0/device/power/runtime_auto_suspend_delay_ms"
    "echo 'mem_sleep' > /sys/power/mem_sleep"
)

# Reboot requirement
ULTRA_ECO_REQUIRES_REBOOT=true
ULTRA_ECO_LOGOUT_REQUIRED=false
