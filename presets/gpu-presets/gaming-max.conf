# ==============================================================================
# GAMING MAXIMUM GPU PRESET - NVIDIA dGPU Overclocked
# ==============================================================================
# Description: Maximum NVIDIA performance with overclocking for gaming
# Use case: Gaming, maximum FPS, benchmarking
# Power consumption: Maximum (full NVIDIA performance + overclocking)
# Performance: Maximum+ (overclocked NVIDIA)
# ==============================================================================

GAMING_MAX_GPU_MODE="discrete"
GAMING_MAX_DESCRIPTION="NVIDIA dGPU maximum performance (overclocked)"

# GPU switching method
GAMING_MAX_PRIMARY_METHOD="envycontrol"

# EnvyControl commands
GAMING_MAX_ENVYCONTROL_SWITCH="envycontrol --switch nvidia"
GAMING_MAX_ENVYCONTROL_VERIFY="envycontrol --query"

# Manual fallback commands
GAMING_MAX_MANUAL_COMMANDS=(
    "echo 'ON' > /proc/acpi/bbswitch"
    "modprobe nvidia_drm modeset=1"
    "modprobe nvidia_modeset"
    "modprobe nvidia"
)

# Verification commands
GAMING_MAX_VERIFY_COMMANDS=(
    "nvidia-smi --query-gpu=name --format=csv,noheader,nounits"
    "nvidia-smi --query-gpu=power.draw --format=csv,noheader,nounits"
    "glxinfo | grep 'OpenGL renderer' | grep -i nvidia"
)

# Post-switch optimizations (Gaming overclocking)
GAMING_MAX_POST_SWITCH_COMMANDS=(
    "nvidia-settings -a '[gpu:0]/GPUPowerMizerMode=0'"
    "nvidia-settings -a '[gpu:0]/GPUMemoryTransferRateOffset[3]=1500'"
    "nvidia-settings -a '[gpu:0]/GPUGraphicsClockOffset[3]=200'"
    "nvidia-settings -a '[gpu:0]/GPUFanControlState=1'"
    "nvidia-settings -a '[fan:0]/GPUTargetFanSpeed=80'"
    "nvidia-smi -pl 165"  # Set power limit to maximum
)

# Reboot requirement
GAMING_MAX_REQUIRES_REBOOT=true
GAMING_MAX_LOGOUT_REQUIRED=false
