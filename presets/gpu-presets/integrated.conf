# ==============================================================================
# INTEGRATED GPU PRESET - Intel iGPU Only
# ==============================================================================
# Description: Use only Intel integrated graphics, disable NVIDIA dGPU
# Use case: Maximum battery life, light workloads, office work
# Power consumption: Low (NVIDIA GPU completely disabled)
# Performance: Low-Medium (Intel Arc Graphics only)
# ==============================================================================

INTEGRATED_GPU_MODE="integrated"
INTEGRATED_DESCRIPTION="Intel iGPU only (NVIDIA disabled)"

# GPU switching method
INTEGRATED_PRIMARY_METHOD="envycontrol"

# EnvyControl commands
INTEGRATED_ENVYCONTROL_SWITCH="envycontrol --switch integrated"
INTEGRATED_ENVYCONTROL_VERIFY="envycontrol --query"

# Manual fallback commands
INTEGRATED_MANUAL_COMMANDS=(
    "echo '1' > /sys/bus/pci/devices/0000:01:00.0/remove"
    "modprobe -r nvidia_drm nvidia_modeset nvidia"
    "echo 'blacklist nvidia' > /etc/modprobe.d/blacklist-nvidia.conf"
)

# Verification commands
INTEGRATED_VERIFY_COMMANDS=(
    "lspci | grep -i vga"
    "glxinfo | grep 'OpenGL renderer' | grep -i intel"
    "cat /proc/acpi/bbswitch 2>/dev/null || echo 'bbswitch not available'"
)

# Post-switch optimizations
INTEGRATED_POST_SWITCH_COMMANDS=(
    "echo 'powersave' > /sys/class/drm/card0/device/power_dpm_force_performance_level"
    "echo 'auto' > /sys/class/drm/card0/device/power/control"
)

# Reboot requirement
INTEGRATED_REQUIRES_REBOOT=true
INTEGRATED_LOGOUT_REQUIRED=false
